* INA821
* Created by Ian Williams; November 28, 2018
* Created with Green-Williams-Lis Op Amp Macro-model Architecture
* Copyright 2018 by Texas Instruments Corporation
******************************************************
* MACRO-MODEL SIMULATED PARAMETERS:
******************************************************
* OPEN-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Aol)
* UNITY GAIN BANDWIDTH (GBW)
* INPUT COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR)
* POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR)
* DIFFERENTIAL INPUT IMPEDANCE (Zid)
* COMMON-MODE INPUT IMPEDANCE (Zic)
* OPEN-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zo)
* OUTPUT CURRENT THROUGH THE SUPPLY (Iout)
* INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en)
* INPUT CURRENT NOISE DENSITY VS. FREQUENCY (in)
* OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vo)
* SHORT-CIRCUIT OUTPUT CURRENT (Isc)
* SETTLING TIME VS. CAPACITIVE LOAD (ts)
* QUIESCENT CURRENT (Iq)
* SLEW RATE (SR)
* SMALL SIGNAL OVERSHOOT VS. CAPACITIVE LOAD
* LARGE SIGNAL RESPONSE
* OVERLOAD RECOVERY TIME (tor)
* INPUT BIAS CURRENT (Ib)
* INPUT OFFSET CURRENT (Ios)
* INPUT OFFSET VOLTAGE (Vos)
* INPUT OFFSET VOLTAGE vs. TEMPERATURE (Vos Drift)
* INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
* INPUT/OUTPUT ESD CELLS (ESDin, ESDout)
******************************************************
.subckt INA821 IN+ IN- VCC VEE OUT REF RG+ RG-
******************************************************
.model R_NOISELESS RES( TCE=0 T_ABS=-273.15)
.model S_VSWITCH_1 VSWITCH (RON=50 ROFF=1T VON=500M VOFF=100M)
VCM_MINn    30 VEE_B 2
VCM_MAXn    31 VCC_B -2
V_OSn       33 28 0
I_OS        28 MID 1F
I_B         18 MID 150P
VCM_MINp    36 VEE_B 2
VCM_MAXp    37 VCC_B -2
I_Q         VCC VEE 600U
ISINK2      RG+ VEE_B 24U
ISINK1      RG- VEE_B 24U
VB          VCC_B IN+_J1_26 1
XU5         17 18 VOS_DRIFT_IN_INA821
XA3         IN+_J1_19 IN-_J1_20 VCC VCC_B VEE VEE_B OUT_J1 MID OUT_AMP_INA821
XU2         GAIN_S MID 22 REF R_CMRR_INA821
R27         23 MID R_NOISELESS 1 
GVCCS1      23 MID INp INn  -1
XU1         MID OUT 23 GAIN_S GAIN_SENSE_INA821
R26         GAIN_S MID R_NOISELESS 1 
C60         IN-_J1_24 NODE1 3.5P  
C61         IN-_J1 NODE2 3.5P  
XA2         IN+_J1_26 IN-_J1 VCC VEE NODE2 MID IN_AMP_0_INA821
Xe_nn       27 28 VNSE_IN_0_INA821
Xi_nn       28 MID FEMT_INA821
C7          INn MID 1F  
R25         INn 29 R_NOISELESS 1M 
R23         MID 30 R_NOISELESS 1G 
R22         31 MID R_NOISELESS 1G 
R24         MID 29 R_NOISELESS 1 
XVCM_CLAMPn 32 MID 29 MID 31 30 VCCS_EXT_LIM_INA821
S7          VEE 27 VEE 27  S_VSWITCH_1
S5          27 VCC 27 VCC  S_VSWITCH_1
S6          VEE 34 VEE 34  S_VSWITCH_1
S4          34 VCC 34 VCC  S_VSWITCH_1
Xi_np       MID 18 FEMT_INA821
Xe_np       34 18 VNSE_IN_1_INA821
C_DIFF      34 27 1P  
C6          INp MID 1F  
R21         INp 35 R_NOISELESS 1M 
R15         MID 36 R_NOISELESS 1G 
R14         37 MID R_NOISELESS 1G 
R20         MID 35 R_NOISELESS 1 
XVCM_CLAMPp 38 MID 35 MID 37 36 VCCS_EXT_LIM_INA821
R13         32 33 R_NOISELESS 1M 
R12         38 17 R_NOISELESS 1M 
C_CMn       27 MID 7P  
C_CMp       MID 34 7P  
R19         27 MID R_NOISELESS 1T 
R18         MID 34 R_NOISELESS 1T 
R17         IN- 27 R_NOISELESS 10M 
R16         IN+ 34 R_NOISELESS 10M 
XA1         IN+_J1_26 IN-_J1_24 VCC VEE NODE1 MID IN_AMP_1_INA821
S10         VEE REF VEE REF  S_VSWITCH_1
S11         REF VCC REF VCC  S_VSWITCH_1
R168        OUT_J1 OUT 10M 
C65         REF IN+_J1_19 1F  
C64         OUT_J1 IN-_J1_20 100F  
R4          IN+_J1_19 22 10K 
R3          NODE2 IN+_J1_19 10K 
R2          IN-_J1_20 OUT_J1 10K 
R1          NODE1 IN-_J1_20 10K 
S9          VEE OUT VEE OUT  S_VSWITCH_1
S8          OUT VCC OUT VCC  S_VSWITCH_1
RMID        MID 39 R_NOISELESS 10M 
G1          VCC_B 0 VCC 0  -1
G2          VEE_B 0 VEE 0  -1
R10         VCC_B 0 R_NOISELESS 1 
R6          VCC_B 40 R_NOISELESS 1M 
C4          40 0 1F  
R8          40 41 R_NOISELESS 1MEG 
R5          41 0 R_NOISELESS 1G 
C3          41 0 1  
R9          41 42 R_NOISELESS 1MEG 
C5          42 0 1F  
R7          42 VEE_B R_NOISELESS 1M 
R11         VEE_B 0 R_NOISELESS 1 
E3          39 0 41 0  1
RF2         NODE2 RG+ 24.7K 
S15         VEE RG+ VEE RG+  S_VSWITCH_1
S14         RG+ VCC RG+ VCC  S_VSWITCH_1
S13         VEE RG- VEE RG-  S_VSWITCH_1
S12         RG- VCC RG- VCC  S_VSWITCH_1
RF1         NODE1 RG- 24.7K 
GM2         IN-_J1 RG+ INp RG+  1.33M
GM1         IN-_J1_24 RG- INn RG-  1.33M
RB2         VCC_B IN-_J1 41.67K 
RB1         VCC_B IN-_J1_24 41.67K 
.ends
*$
*
.subckt OUT_AMP_INA821 IN+ IN- VCC VCC_B VEE VEE_B OUT MID
.model R_NOISELESS RES( TCE=0 T_ABS=-273.15)
.model S_VSWITCH_1 VSWITCH (RON=1M ROFF=1G VON=900M VOFF=800M)
.model S_VSWITCH_2 VSWITCH (RON=10M ROFF=1G VON=10M VOFF=0)
VCM_MAX1    78 VCC_B -2
VCM_MIN1    79 VEE_B 2
V5          87 88 0
V_ORp3      89 VCLP3 450M
V4          90 91 0
V_ORn3      92 VCLP3 -650M
V_ISCn3     101 MID -18
V_ISCp3     102 MID 18
V_GRn3      112 MID -144
V_GRp3      113 MID 144
V3          59 OUT 0
XU5         53 54 VOS_DRIFT_OUT_INA821
C49         MID 55 1.59F  
C48         MID 56 4.97F  
S1          57 58 SW_OL3 MID  S_VSWITCH_1
Rx3         59 60 R_NOISELESS 100K 
Rdummy3     MID 59 R_NOISELESS 10K 
G22         61 MID 58 MID  -6.866
R114        61 MID R_NOISELESS 1 
R117        62 63 R_NOISELESS 100MEG 
C44         62 63  1.87200000000000E-0016  
R118        62 MID R_NOISELESS 8.50072K 
XVCCS_LIM_ZO3 62 MID MID 60 VCCS_LIM_ZO_OUT_INA821
R119        60 MID R_NOISELESS 1 
R115        64 61 R_NOISELESS 147MEG 
R116        65 64 R_NOISELESS 100MEG 
C43         65 MID 6.77F  
Gb1         66 MID 64 MID  -1
R120        66 MID R_NOISELESS 1 
R121        67 66 R_NOISELESS 300MEG 
R122        68 67 R_NOISELESS 100MEG 
C45         68 MID  7.96000000000000E-0017  
Gc1         69 MID 67 MID  -1
R126        63 MID R_NOISELESS 1 
C42         57 58 4.75N  
R113        58 MID R_NOISELESS 17.05MEG 
R123        69 MID R_NOISELESS 1 
R124        70 69 R_NOISELESS 300MEG 
R125        71 70 R_NOISELESS 100MEG 
C46         71 MID  7.96E-17  
Gc2         63 MID 70 MID  -1
G24         56 MID 72 MID  -1U
R131        MID 56 R_NOISELESS 1MEG 
R60         73 53 R_NOISELESS 1M 
R61         74 75 R_NOISELESS 1M 
XVCM_CLAMP3 76 MID 77 MID 78 79 VCCS_EXT_LIM_INA821
R64         MID 77 R_NOISELESS 1 
R62         78 MID R_NOISELESS 1G 
R63         MID 79 R_NOISELESS 1G 
R65         80 77 R_NOISELESS 1M 
C24         80 MID 1F  
G18         VSENSE3 MID CLAMP3 MID  -1M
R99         MID VSENSE3 R_NOISELESS 1K 
G16         CLAW_CLAMP3 MID 55 MID  -1M
R100        MID CLAW_CLAMP3 R_NOISELESS 1K 
G17         CL_CLAMP3 MID CLAW_CLAMP3 MID  -1M
R101        MID CL_CLAMP3 R_NOISELESS 1K 
E6          81 MID CL_CLAMP3 MID  1
XOL_SENSE3  MID 82 83 84 OL_SENSE_OUT_INA821
R87         82 MID R_NOISELESS 1 
R88         82 SW_OL3 R_NOISELESS 100 
C32         SW_OL3 MID 1P  
H5          85 MID V5 1
H4          86 MID V4 -1
XCLAW_SRC3  93 94 CLAW_CLAMP3 MID VCCS_LIM_3_OUT_INA821
C30         MID 94 1F  
C31         93 MID 1F  
R84         95 94 R_NOISELESS 1M 
R83         96 93 R_NOISELESS 1M 
R80         MID 95 R_NOISELESS 1 
R81         96 MID R_NOISELESS 1 
R79         VEE_CLP3 MID R_NOISELESS 1G 
R82         VCC_CLP3 MID R_NOISELESS 1G 
XCLAW_AMP3  VCC_CLP3 VEE_CLP3 VOUT_S3 MID 96 95 CLAMP_AMP_LO_INA821
R70         MID VEE_CLP3 R_NOISELESS 1K 
G15         VEE_CLP3 MID 97 MID  -1M
R71         VCC_CLP3 MID R_NOISELESS 1K 
G14         VCC_CLP3 MID 98 MID  -1M
C25         MID 98 1F  
C26         97 MID 1F  
R73         97 99 R_NOISELESS 1M 
R69         VEE_B 99 R_NOISELESS 1K 
R72         100 98 R_NOISELESS 1M 
R68         100 VCC_B R_NOISELESS 1K 
XCLAWn3     MID VIMON3 VEE_B 99 VCCS_LIM_CLAWN_OUT_INA821
XCLAWp3     VIMON3 MID 100 VCC_B VCCS_LIM_CLAWP_OUT_INA821
R75         MID 101 R_NOISELESS 1G 
R78         102 MID R_NOISELESS 1G 
XCL_SRC3    103 104 CL_CLAMP3 MID VCCS_LIM_4_OUT_INA821
C28         MID 104 1F  
C29         103 MID 1F  
R86         105 104 R_NOISELESS 1M 
R85         106 103 R_NOISELESS 1M 
R76         MID 105 R_NOISELESS 1 
R77         106 MID R_NOISELESS 1 
XGR_SRC3    107 108 CLAMP3 MID VCCS_LIM_GR_OUT_INA821
C35         MID 108 1F  
C34         107 MID 1F  
R97         109 108 R_NOISELESS 1M 
R96         110 107 R_NOISELESS 1M 
R92         MID 109 R_NOISELESS 1 
R94         110 MID R_NOISELESS 1 
C36         111 MID 1F  
R98         VSENSE3 111 R_NOISELESS 1M 
R93         112 MID R_NOISELESS 1G 
R95         113 MID R_NOISELESS 1G 
XGR_AMP3    113 112 111 MID 110 109 CLAMP_AMP_HI_INA821
S3          90 CLAMP3 90 CLAMP3  S_VSWITCH_2
S2          CLAMP3 87 CLAMP3 87  S_VSWITCH_2
XCL_AMP3    102 101 VIMON3 MID 106 105 CLAMP_AMP_LO_INA821
G21         57 MID CL_CLAMP3 59  -88.496
Rdc3        57 MID R_NOISELESS 1 
R112        58 57 R_NOISELESS 100MEG 
XVCCS_LIM_5 80 74 MID 114 VCCS_LIM_1_INA821
R106        MID 114 R_NOISELESS 1MEG 
XVCCS_LIM_6 114 MID MID CLAMP3 VCCS_LIM_2_OUT_INA821
R107        MID CLAMP3 R_NOISELESS 1MEG 
C38         CLAMP3 MID 300N  
G19         91 MID 92 MID  -1
R108        91 MID R_NOISELESS 1 
G20         88 MID 89 MID  -1
R109        MID 88 R_NOISELESS 1 
R110        86 83 R_NOISELESS 100 
C39         83 MID 1P  
R111        85 84 R_NOISELESS 100 
C40         84 MID 1P  
Gb2         72 MID 115 MID  -1
R130        MID 72 R_NOISELESS 1 
G23         116 MID VSENSE3 MID  -1
R129        MID 116 R_NOISELESS 1 
R127        116 115 R_NOISELESS 73.1MEG 
R128        115 117 R_NOISELESS 100MEG 
C47         117 MID  3.537E-16  
G25         55 MID 56 MID  -1U
R132        MID 55 R_NOISELESS 1MEG 
Rsrc3       MID 118 R_NOISELESS 1 
G27         118 MID 119 MID  -326.667
R136        MID 119 R_NOISELESS 30.71 
C51         119 120 15N  
R135        120 119 R_NOISELESS 10K 
Rsrc2       MID 120 R_NOISELESS 1 
G26         120 MID 121 MID  -1
Xe_n3       122 54 VNSE_OUT_INA821
R137        MID 123 R_NOISELESS 1.00001K 
C52         123 124 1.326N  
R138        124 123 R_NOISELESS 100MEG 
G29         124 MID VEE_B MID  -50M
Rsrc4       MID 124 R_NOISELESS 1 
R133        MID 121 R_NOISELESS 30.71 
C50         121 125 15N  
R134        125 121 R_NOISELESS 10K 
G28         125 MID VCC_B MID  -163.35U
Rsrc1       MID 125 R_NOISELESS 1 
XIQp        VIMON3 MID MID VCC VCCS_LIMIT_IQ_INA821
XIQn        MID VIMON3 VEE MID VCCS_LIMIT_IQ_INA821
C_DIFF3     122 75 1P  
H3          126 MID V3 1K
R67         MID 127 R_NOISELESS 1G 
R74         127 VOUT_S3 R_NOISELESS 100 
C27         VOUT_S3 MID 1N  
E7          127 MID OUT MID  1
C33         VIMON3 MID 1N  
R89         126 VIMON3 R_NOISELESS 100 
R66         MID 126 R_NOISELESS 1G 
R102        81 VCLP3 R_NOISELESS 100 
C37         VCLP3 MID 1N  
R105        73 76 R_NOISELESS 1K 
G13         76 73 118 123  -1M
C_CMn3      75 MID 1P  
C_CMp3      MID 122 1P  
R104        75 MID R_NOISELESS 1T 
R103        MID 122 R_NOISELESS 1T 
R91         IN- 75 R_NOISELESS 10M 
R90         IN+ 122 R_NOISELESS 10M 
.ends
*$
*
.subckt IN_AMP_0_INA821 IN+ IN- VCC VEE OUT MID
.model R_NOISELESS RES( TCE=0 T_ABS=-273.15)
V2          145 OUT 0
G33         138 MID 137 MID  -9.09091K
Gc6         140 MID 139 MID  -1
C59         141 MID  2.122E-16
R165        141 139 R_NOISELESS 100MEG 
R164        139 142 R_NOISELESS 271.3MEG 
R1          142 MID R_NOISELESS 1 
G12         144 MID 143 MID  -1U
R59         MID 144 R_NOISELESS 1MEG 
C23         MID 144 15.9F  
G9          146 MID 144 145  -88.496
Rdc2        146 MID R_NOISELESS 1 
R56         147 146 R_NOISELESS 100MEG 
R153        147 MID R_NOISELESS 5.882MEG 
C55         146 147 15.92N  
XVCCS_LIM_3 IN+ IN- MID 148 VCCS_LIM_1_INA821
R48         MID 148 R_NOISELESS 1MEG 
XVCCS_LIM_4 148 MID MID 149 VCCS_LIM_2_IN_INA821
R49         MID 149 R_NOISELESS 1MEG 
C18         149 MID 1.46U  
G10         150 MID 149 MID  -1U
R57         MID 150 R_NOISELESS 1MEG 
C21         MID 150 35.4F  
G11         143 MID 150 MID  -1U
R58         MID 143 R_NOISELESS 1MEG 
C22         MID 143 15.9F  
R166        140 MID R_NOISELESS 1 
Gc5         142 MID 151 MID  -1
C58         152 MID  2.122E-16  
R162        152 151 R_NOISELESS 100MEG 
R161        151 153 R_NOISELESS 271.3MEG 
R160        153 MID R_NOISELESS 1 
Gb4         153 MID 154 MID  -1
C56         155 MID 3.316F  
R156        155 154 R_NOISELESS 100MEG 
R155        154 156 R_NOISELESS 627.3MEG 
R159        138 MID R_NOISELESS 1 
R158        137 MID R_NOISELESS 11.0012K 
C57         137 140  1.477E-16  
R157        137 140 R_NOISELESS 100MEG 
R154        156 MID R_NOISELESS 1 
G32         156 MID 147 MID  -18
Rdummy2     MID 145 R_NOISELESS 10K 
Rx2         145 138 R_NOISELESS 100K 
XIQp1       VIMON2 MID MID VCC VCCS_LIMIT_IQ_INA821
XIQn1       MID VIMON2 VEE MID VCCS_LIMIT_IQ_INA821
H2          157 MID V2 1K
C17         VIMON2 MID 1N  
R46         157 VIMON2 R_NOISELESS 100 
R43         MID 157 R_NOISELESS 1G 
.ends
*
*$
.subckt IN_AMP_1_INA821 IN+ IN- VCC VEE OUT MID
.model R_NOISELESS RES( TCE=0 T_ABS=-273.15)
V1          191 OUT 0
G31         184 MID 183 MID  -9.09091K
Gc4         186 MID 185 MID  -1
C54         187 MID  2.122E-0016  
R151        187 185 R_NOISELESS 100MEG 
R150        185 188 R_NOISELESS 271.3MEG 
R1          188 MID R_NOISELESS 1 
G7          190 MID 189 MID  -1U
R42         MID 190 R_NOISELESS 1MEG 
C1          MID 190 15.9F  
G4          192 MID 190 191  -88.496
Rdc1        192 MID R_NOISELESS 1 
R39         193 192 R_NOISELESS 100MEG 
R139        193 MID R_NOISELESS 5.882MEG 
C1_2        192 193 15.92N  
XVCCS_LIM_1 IN+ IN- MID 194 VCCS_LIM_1_INA821
R31         MID 194 R_NOISELESS 1MEG 
XVCCS_LIM_2 194 MID MID 195 VCCS_LIM_2_IN_INA821
R32         MID 195 R_NOISELESS 1MEG 
C10         195 MID 1.45U  
G5          196 MID 195 MID  -1U
R40         MID 196 R_NOISELESS 1MEG 
C13         MID 196 35.4F  
G6          189 MID 196 MID  -1U
R41         MID 189 R_NOISELESS 1MEG 
C14         MID 189 15.9F  
R152        186 MID R_NOISELESS 1 
Gc3         188 MID 197 MID  -1
C53         198 MID  2.122E-16  
R148        198 197 R_NOISELESS 100MEG 
R147        197 199 R_NOISELESS 271.3MEG 
R86         199 MID R_NOISELESS 1 
Gb3         199 MID 200 MID  -1
C2          201 MID 3.316F  
R142        201 200 R_NOISELESS 100MEG 
R141        200 202 R_NOISELESS 627.3MEG 
R145        184 MID R_NOISELESS 1 
R144        183 MID R_NOISELESS 11.0012K 
C41         183 186  1.477E-16  
R143        183 186 R_NOISELESS 100MEG 
R140        202 MID R_NOISELESS 1 
G30         202 MID 193 MID  -18
Rdummy1     MID 191 R_NOISELESS 10K 
Rx1         191 184 R_NOISELESS 100K 
XIQp1       VIMON1 MID MID VCC VCCS_LIMIT_IQ_INA821
XIQn1       MID VIMON1 VEE MID VCCS_LIMIT_IQ_INA821
H1          203 MID V1 1K
C9          VIMON1 MID 1N  
R29         203 VIMON1 R_NOISELESS 100 
R26         MID 203 R_NOISELESS 1G 
.ends
*$
*
.subckt VOS_DRIFT_IN_INA821  VOS+ VOS-
.param DC = 10E-06
.param POL = 1
.param DRIFT = 0.4E-6
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ends
*$
*
.subckt R_CMRR_INA821  GAIN COM R1 R2
ERES R1 1 VALUE = {I(VSENSE)*V(2,COM)}
ETABLE 2 COM TABLE {V(GAIN,COM)} =
+(0, 0.2)
+(500, 0.2)
+(1000, 1.15)
+(2000, 2.3)
+(5000, 5.75)
VSENSE 1 R2 DC 0
.ends
*$
*
.subckt GAIN_SENSE_INA821  COM VOUT VIN GAIN
G1 COM GAIN VALUE = {MAX((V(VOUT,COM)/V(VIN,COM))-5,0)}
.ends
*$
*
.subckt VNSE_IN_0_INA821  1 2
.param FLW=1
.param NLF=1
.param NVR=4.3
.param GLF={PWR(FLW,0.25)*NLF/1164}
.param RNV={1.184*PWR(NVR,2)}
.model DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ends
*$
*
.subckt FEMT_INA821  1 2
.param FLWF=0.11
.param NLFF=370
.param NVRF=100
.param GLFF={PWR(FLWF,0.25)*NLFF/1164}
.param RNVF={1.184*PWR(NVRF,2)}
.model DVNF D KF={PWR(FLWF,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVNF
D2 8 0 DVNF
E1 3 6 7 8 {GLFF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNVF}
R5 5 0 {RNVF}
R6 3 4 1E9
R7 4 0 1E9
G1 1 2 3 4 1E-6
.ends
*$
*
.subckt VCCS_EXT_LIM_INA821  VIN+ VIN- IOUT- IOUT+ VP+ VP-
.param GAIN = 1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}
.ends
*$
*
.subckt VNSE_IN_1_INA821  1 2
.param FLW=1
.param NLF=4.3
.param NVR=4.3
.param GLF={PWR(FLW,0.25)*NLF/1164}
.param RNV={1.184*PWR(NVR,2)}
.model DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ends
*$
*
.subckt VOS_DRIFT_OUT_INA821  VOS+ VOS-
.param DC = 10.09E-06
.param POL = 1
.param DRIFT = 2.5E-6
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ends
*$
*
.subckt VCCS_LIM_ZO_OUT_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 11764.7
.param IPOS = 3.6E3
.param INEG = -3.6E3
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends
*$
*
.subckt OL_SENSE_OUT_INA821  COM SW+ OLN  OLP
GSW+ COM SW+ VALUE = {IF((V(OLN,COM)>10E-3 | V(OLP,COM)>10E-3),1,0)}
.ends
*$
*
.subckt VCCS_LIM_3_OUT_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 1
.param IPOS = 0.287
.param INEG = -0.287
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends
*$
*
.subckt CLAMP_AMP_LO_INA821  VC+ VC- VIN COM VO+ VO-
.param G=1
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ends
*$
*
.subckt VCCS_LIM_CLAWN_OUT_INA821  VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {ABS(V(VC+,VC-))} =
+(0, 4e-5)
+(2, 8.16e-5)
+(4, 1.21e-4)
+(8, 1.92e-4)
+(10, 2.35e-4)
+(12, 2.76e-4)
+(13, 3.1e-4)
+(13.5, 3.39e-4)
+(13.9, 3.7e-4)
+(18, 7e-4)
.ends
*$
*
.subckt VCCS_LIM_CLAWP_OUT_INA821  VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {ABS(V(VC+,VC-))} =
+(0, 3e-5)
+(8, 2.36e-4)
+(10, 2.82e-4)
+(12, 3.34e-4)
+(13, 3.66e-4)
+(13.9, 4.02e-4)
+(18, 6e-4)
.ends
*$
*
.subckt VCCS_LIM_4_OUT_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 1
.param IPOS = 0.575
.param INEG = -0.575
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends
*$
*
.subckt VCCS_LIM_GR_OUT_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 1
.param IPOS = 1.26
.param INEG = -1.26
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends
*$
*
.subckt CLAMP_AMP_HI_INA821  VC+ VC- VIN COM VO+ VO-
.param G=10
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ends
*$
*
.subckt VCCS_LIM_1_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 1E-4
.param IPOS = .5
.param INEG = -.5
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends
*$
*
.subckt VCCS_LIM_2_OUT_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN =  0.1234
.param IPOS = 0.63
.param INEG = -0.63
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends
*$
*
.subckt VNSE_OUT_INA821  1 2
.param FLW=0.11
.param NLF=254
.param NVR=27
.param GLF={PWR(FLW,0.25)*NLF/1164}
.param RNV={1.184*PWR(NVR,2)}
.model DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ends
*$
*
.subckt VCCS_LIMIT_IQ_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 1E-3
G1 IOUT- IOUT+ VALUE={IF( (V(VC+,VC-)<=0),0,GAIN*V(VC+,VC-) )}
.ends
*$
*
.subckt VCCS_LIM_2_IN_INA821  VC+ VC- IOUT+ IOUT-
.param GAIN = 0.1234
.param IPOS = 10
.param INEG = -10
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ends